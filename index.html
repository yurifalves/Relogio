<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha idade</title>
    <style>
        div {
            margin: 0.4rem 0;
        }

        label {
            font: 1rem 'Fira Sans', sans-serif;
        }
    </style>
</head>
<body>
    <h1>Sobre mim</h1>
    <form>
        <div>
            <label for="data-de-nascimento">Selecione a data de nascimento:</label>
            <input id="data-de-nascimento" type="date" value="2018-07-22">
        </div>
    </form>
    <h2>Essa é a sua idade aproximada:</h2>
    <p id="idade-anos">Em anos:</p>
    <p id="idade-meses">Em meses:</p>
    <p id="idade-semanas">Em semanas:</p>
    <p id="idade-dias">Em dias:</p>
    <p id="idade-horas">Em horas:</p>
    <p id="idade-minutos">Em minutos:</p>
    <p id="idade-segundos">Em segundos:</p>
    <p id="idade-milisegundos">Em milisegundos:</p>

    <script>
        function idadeAnos(dateString) {  // dateString === 'yyyy/mm/dd'
            const hoje = new Date();
            const birthDate = new Date(dateString);
            let idadeA = hoje.getFullYear() - birthDate.getFullYear();
            const m = hoje.getMonth() - birthDate.getMonth();
            if (m < 0 || (m === 0 && hoje.getDate() < birthDate.getDate())) {
                idadeA--;
            }
            return idadeA;
        }

        function idadeMeses(dateString) {  // dateString === 'yyyy/mm/dd'
            const hoje = new Date();
            const idadeM = idadeAnos(`${anoNascimento()}/${mesNascimento()}/${diaNascimento()}`) * 12;

            if (parseInt(mesNascimento()) > hoje.getMonth+1) {
                // ...
            }
            else if (parseInt(mesNascimento()) < hoje.getMonth+1) {
                // ...
            }
            else {
                if (parseInt(diaNascimento()) > hoje.getDate()) {
                    (parseInt(horaNascimento()))
                }
            }
        }

        function idadeMilisegundos(dateString) {  // dateString === 'yyyy/mm/dd'
            const hoje = new Date();
            const dataNascimento = new Date(dateString);
            const idadeM = hoje - dataNascimento;
            return idadeM;
        }

        // FUNÇÕES PARA PEGAR OS DADOS DO FORMULÁRIO
        function diaNascimento() {
            const dataNascimento = document.querySelector('#data-de-nascimento').value;  // 'yyyy-mm-dd'
            return parseInt(dataNascimento.split('-')[2]);
        }

        function mesNascimento() {
            const dataNascimento = document.querySelector('#data-de-nascimento').value;  // 'yyyy-mm-dd'
            return parseInt(dataNascimento.split('-')[1]);
        }

        function anoNascimento() {
            const dataNascimento = document.querySelector('#data-de-nascimento').value;  // 'yyyy-mm-dd'
            return parseInt(dataNascimento.split('-')[0]);
        }


        // FUNÇÕES PARA EXIBIR A IDADE
        function exibirDados() {
            exibirAnos();
        }

        function exibirAnos() {
            const paragrafoIdadeAnos = document.querySelector('p#idade-anos');
            const idadeAnos = idadeAnos(`${anoNascimento()}/${mesNascimento()}/${diaNascimento()}`);
            paragrafoIdadeAnos.textContent += `${idadeAnos} anos`;
        }

        function exibirMeses() {
            const paragrafoIdadeMeses = document.querySelector('p#idade-meses');
            const idadeMeses = idadeMeses(`${anoNascimento()}/${mesNascimento()}/${diaNascimento()}`);
            paragrafoIdadeMeses.textContent += `${idadeMeses} meses`;
        }

        function exibirSemanas() {
            //
        }

        function exibirDias() {
            // setTimeout(exibirDias, 24*60*60*1000);
        }

        function exibirHoras() {
            // setTimeout(exibirHoras, 60*60*1000);
        }

        function exibirMinutos() {
            // setTimeout(exibirMinutos, 60*1000);
        }

        function exibirSegundos() {
            // setTimeout(exibirSegundos, 1000);
        }

        function exibirMilisegundos() {
            const paragrafoIdadeMilisegundos = document.querySelector('p#idade-milisegundos');
            paragrafoIdadeMilisegundos.textContent = `Em milisegundos: ${idadeMilisegundos(`${anoNascimento()}/${mesNascimento()}/${diaNascimento()}`)}`; 

            setTimeout(exibirMilisegundos, 1);
        }


        document.addEventListener('DOMContentLoaded', () => {
            exibirAnos();
            exibirMeses();
            exibirSemanas();
            exibirDias();
            exibirHoras();
            exibirMinutos();
            exibirSegundos();
            exibirMilisegundos();
        });
    </script>
</body>
</html>
