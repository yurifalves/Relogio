<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha idade</title>
    <style>
        div {
            margin: 0.4rem 0;
        }

        label {
            font: 1rem 'Fira Sans', sans-serif;
        }
    </style>
</head>
<body>
    <h1>Sobre mim</h1>
    <form>
        <div>
            <label for="data-de-nascimento">Selecione a data de nascimento:</label>
            <input id="data-de-nascimento" type="date" value="2018-07-22">
        </div>
    </form>
    <h2>Essa é a sua idade aproximada:</h2>
    <p id="idade-anos">Em anos:</p>
    <p id="idade-meses">Em meses:</p>
    <p id="idade-semanas">Em semanas:</p>
    <p id="idade-dias">Em dias:</p>
    <p id="idade-horas">Em horas:</p>
    <p id="idade-minutos">Em minutos:</p>
    <p id="idade-segundos">Em segundos:</p>
    <p id="idade-milissegundos">Em milissegundos:</p>

    <script>
        /* --- FUNÇÕES PARA DESCOBRIR AS DIFERENTES IDADES --- */

        function idadeAnos(dateString) {  // dateString === 'yyyy/mm/dd'
            const hoje = new Date();
            const birthDate = new Date(dateString);
            let idadeA = hoje.getFullYear() - birthDate.getFullYear();
            const m = hoje.getMonth() - birthDate.getMonth();
            if (m < 0 || (m === 0 && hoje.getDate() < birthDate.getDate())) {
                idadeA--;
            }
            return idadeA;
        }

        function idadeMeses(dateString) {  // dateString === 'yyyy/mm/dd'
            const hoje = new Date();
            const idadeM = idadeAnos(`${anoNascimento()}/${mesNascimento()}/${diaNascimento()}`) * 12;

            if (parseInt(mesNascimento()) > hoje.getMonth+1) {
                // ...
            }
            else if (parseInt(mesNascimento()) < hoje.getMonth+1) {
                // ...
            }
            else {
                if (parseInt(diaNascimento()) > hoje.getDate()) {
                    (parseInt(horaNascimento()))
                }
            }
        }

        function idadeMinutos(dateString) {  // dateString === 'yyyy/mm/dd'
            const idadeM = parseInt(idadeSegundos(dateString) / 60);
            return idadeM;
        }

        function idadeSegundos(dateString) {  // dateString === 'yyyy/mm/dd'
            const idadeS = parseInt(idadeMilissegundos(dateString) / 1000);
            return idadeS;
        }

        function idadeMilissegundos(dateString) {  // dateString === 'yyyy/mm/dd'
            const hoje = new Date();
            const dataNascimento = new Date(dateString);
            const idadeM = hoje - dataNascimento;
            return idadeM;
        }

        /* --- FUNÇÕES PARA PEGAR OS DADOS DO FORMULÁRIO --- */
        function diaNascimento() {
            const dataNascimento = document.querySelector('#data-de-nascimento').value;  // 'yyyy-mm-dd'
            return parseInt(dataNascimento.split('-')[2]);
        }

        function mesNascimento() {
            const dataNascimento = document.querySelector('#data-de-nascimento').value;  // 'yyyy-mm-dd'
            return parseInt(dataNascimento.split('-')[1]);
        }

        function anoNascimento() {
            const dataNascimento = document.querySelector('#data-de-nascimento').value;  // 'yyyy-mm-dd'
            return parseInt(dataNascimento.split('-')[0]);
        }


        // FUNÇÕES PARA EXIBIR A IDADE
        function exibirDados() {
            exibirAnos();
        }

        function exibirAnos() {
            const paragrafoIdadeAnos = document.querySelector('p#idade-anos');
            paragrafoIdadeAnos.textContent = `Em anos: ${idadeAnos(`${anoNascimento()}/${mesNascimento()}/${diaNascimento()}`)}`;
        }

        function exibirMeses() {
            // setTimeout(exibirMeses, 28*7*24*60*60*1000);
        }

        function exibirSemanas() {
            // setTimeout(exibirSemanas, 6*24*60*60*1000);
        }

        function exibirDias() {
            // setTimeout(exibirDias, 24*60*60*1000);
        }

        function exibirHoras() {
            // setTimeout(exibirHoras, 60*60*1000);
        }

        function exibirMinutos() {
            const paragrafoIdadeMinutos = document.querySelector('p#idade-minutos');
            paragrafoIdadeMinutos.textContent = `Em minutos: ${idadeMinutos(`${anoNascimento()}/${mesNascimento()}/${diaNascimento()}`)}`; 

            setTimeout(exibirMinutos, 60*1000);
        }

        function exibirSegundos() {
            const paragrafoIdadeSegundos = document.querySelector('p#idade-segundos');
            paragrafoIdadeSegundos.textContent = `Em segundos: ${idadeSegundos(`${anoNascimento()}/${mesNascimento()}/${diaNascimento()}`)}`; 

            setTimeout(exibirSegundos, 1000);
        }

        function exibirMilissegundos() {
            const paragrafoIdadeMilissegundos = document.querySelector('p#idade-milissegundos');
            paragrafoIdadeMilissegundos.textContent = `Em milissegundos: ${idadeMilissegundos(`${anoNascimento()}/${mesNascimento()}/${diaNascimento()}`)}`; 

            setTimeout(exibirMilissegundos, 1);
        }

        function exibirIdades() {
            exibirAnos();
            exibirMeses();
            exibirSemanas();
            exibirDias();
            exibirHoras();
            exibirMinutos();
            exibirSegundos();
            exibirMilissegundos();
        }

        document.addEventListener('DOMContentLoaded', () => exibirIdades());

        document.querySelector('input#data-de-nascimento').addEventListener('change', () => exibirIdades());

    </script>
</body>
</html>
